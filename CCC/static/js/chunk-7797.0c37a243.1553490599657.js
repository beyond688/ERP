(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7797"],{"6Vw4":function(e,t,r){"use strict";r.r(t);var a=r("gDS+"),l=r.n(a),o=r("DhTb"),s={name:"AddStandardProcess",data:function(){return{productTypeId:"",matercontrol:!1,isKeyList:[{value:"1",label:"是"},{value:"2",label:"否"}],control:!1,personalForm:{createPersonId:3,countryId:1,repositoryId:438,regionId:2},personalrules:{code:[{required:!0,message:"请输入工序编号",trigger:"blur"}],processName:[{required:!0,message:"请输入工序名称",trigger:"blur"}],workCenterId:[{required:!0,message:"请选择所属工作中心",trigger:"focus"}],testMethod:[{required:!0,message:"请选择校验方式",trigger:"change"}],timeUnit:[{required:!0,message:"请选择时间单位",trigger:"change"}],isCost:[{required:!0,message:"请选择是否计费",trigger:"change"}],isHelp:[{required:!0,message:"请选择是否外部协助",trigger:"change"}],stat:[{required:!0,message:"请选择启用状态",trigger:"change"}]},list2:[],validRules:{}}},methods:{handlemater:function(){this.matercontrol=!0},mater:function(e){this.personalForm.productName=e.productName,this.personalForm.unit=e.purMeasu,this.personalForm.productTypeId=e.typeId,this.productTypeId=e.productType},handleAddproduct:function(){this.control=!0},productdetail:function(e){console.log(e);for(var t=this.$refs.editable.getRecords(),r=0;r<e.length;r++){for(var a=0;a<t.length;a++)if(e[r].productCode===t[a].productCode)return this.$notify.error({title:"错误",message:"物品已添加",offset:100}),!1;this.$refs.editable.insert(e[r])}},restAllForm:function(){this.personalForm={createPersonId:3,countryId:1,repositoryId:438,regionId:2},this.productTypeId=null},handlesave:function(){var e=this,t=this.$refs.editable.getRecords();if(0===t.length)return this.$notify.error({title:"错误",message:"明细表不能为空",offset:100}),!1;t.map(function(e){return e}).forEach(function(e){return null!==e.productCode&&""!==e.productCode&&void 0!==e.productCode||delete e.productCode,null!==e.productName&&""!==e.productName&&void 0!==e.productName||delete e.productName,null!==e.color&&""!==e.color&&void 0!==e.color||delete e.color,null!==e.typeId&&""!==e.typeId&&void 0!==e.typeId||delete e.typeId,null!==e.unit&&""!==e.unit&&void 0!==e.unit||delete e.unit,null!==e.categoryId&&""!==e.categoryId&&void 0!==e.categoryId||delete e.categoryId,null!==e.quantity&&""!==e.quantity&&void 0!==e.quantity||delete e.quantity,null!==e.lossRate&&""!==e.lossRate&&void 0!==e.lossRate||delete e.lossRate,null!==e.isKey&&""!==e.isKey&&void 0!==e.isKey||delete e.isKey,e});var r=l()(t),a=this.personalForm;for(var s in a)""!==a[s]&&void 0!==a[s]&&null!==a[s]||delete a[s];var i=l()(a);this.$refs.personalForm.validate(function(t){if(!t)return e.$notify.error({title:"错误",message:"信息未填完整",offset:100}),!1;e.$refs.editable.validate().then(function(t){t&&Object(o.addmaterials)(i,r,e.personalForm).then(function(t){console.log(t),200===t.data.ret?(e.$notify({title:"成功",message:"保存成功",type:"success",offset:100}),e.restAllForm(),e.$refs.editable.clear(),e.$refs.personalForm.clearValidate(),e.$refs.personalForm.resetFields(),e.$refs.personalForm2.clearValidate(),e.$refs.personalForm2.resetFields()):e.$notify.error({title:"错误",message:t.data.msg,offset:100})})}).catch(function(t){return e.$notify.error({title:"错误",message:"信息未填完整",offset:100}),!1})})},handlecancel:function(){this.$router.go(-1);this.$store.dispatch("delView",{path:"/ProcessFile/AddProcessFile",name:"AddProcessFile",fullPath:"/ProcessFile/AddProcessFile",title:"AddProcessFile"}).then(function(e){e.visitedViews})}}},i=(r("xDkq"),r("KHd+")),n=Object(i.a)(s,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ERP-container"},[r("div",{staticClass:"app-container",staticStyle:{"padding-right":"0"}},[r("el-card",{staticClass:"box-card"},[r("h2",{ref:"geren",staticClass:"form-name"},[e._v("基本信息")]),e._v(" "),r("div",{staticClass:"container"},[r("el-form",{ref:"personalForm",staticClass:"demo-ruleForm",staticStyle:{"margin-left":"30px"},attrs:{model:e.personalForm,rules:e.personalrules,inline:!0,"status-icon":"","label-width":"110px"}},[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.code3"),prop:"code"}},[r("el-input",{staticStyle:{"margin-left":"18px"},attrs:{clearable:""},model:{value:e.personalForm.code,callback:function(t){e.$set(e.personalForm,"code",t)},expression:"personalForm.code"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.processName2"),prop:"processName"}},[r("el-input",{staticStyle:{"margin-left":"18px"},attrs:{clearable:""},model:{value:e.personalForm.processName,callback:function(t){e.$set(e.personalForm,"processName",t)},expression:"personalForm.processName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.shortName")}},[r("el-input",{staticStyle:{"margin-left":"18px"},attrs:{clearable:""},model:{value:e.personalForm.shortName,callback:function(t){e.$set(e.personalForm,"shortName",t)},expression:"personalForm.shortName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.workCenterId"),prop:"workCenterId"}},[r("el-input",{staticStyle:{"margin-left":"18px"},attrs:{clearable:""},model:{value:e.personalForm.workCenterId,callback:function(t){e.$set(e.personalForm,"workCenterId",t)},expression:"personalForm.workCenterId"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.testMethod"),prop:"testMethod"}},[r("el-select",{staticStyle:{"margin-left":"18px",width:"218px"},attrs:{clearable:""},model:{value:e.personalForm.testMethod,callback:function(t){e.$set(e.personalForm,"testMethod",t)},expression:"personalForm.testMethod"}},[r("el-option",{attrs:{value:"1",label:"自检"}}),e._v(" "),r("el-option",{attrs:{value:"2",label:"别人检"}})],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.timeUnit"),prop:"timeUnit"}},[r("el-select",{staticStyle:{"margin-left":"18px",width:"218px"},attrs:{clearable:""},model:{value:e.personalForm.timeUnit,callback:function(t){e.$set(e.personalForm,"timeUnit",t)},expression:"personalForm.timeUnit"}},[r("el-option",{attrs:{value:"1",label:"天"}}),e._v(" "),r("el-option",{attrs:{value:"2",label:"月"}})],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.preTime")}},[r("el-input",{staticStyle:{"margin-left":"18px"},attrs:{clearable:""},model:{value:e.personalForm.preTime,callback:function(t){e.$set(e.personalForm,"preTime",t)},expression:"personalForm.preTime"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.runTime")}},[r("el-input",{staticStyle:{"margin-left":"18px"},attrs:{clearable:""},model:{value:e.personalForm.runTime,callback:function(t){e.$set(e.personalForm,"runTime",t)},expression:"personalForm.runTime"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.isCost"),prop:"isCost"}},[r("el-radio-group",{staticStyle:{width:"277px","margin-left":"19px"},model:{value:e.personalForm.isCost,callback:function(t){e.$set(e.personalForm,"isCost",t)},expression:"personalForm.isCost"}},[r("el-radio",{staticStyle:{width:"120px"},attrs:{label:1}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.isHelp"),"label-width":"120px",prop:"isHelp"}},[r("el-radio-group",{staticStyle:{width:"200px","margin-left":"19px"},model:{value:e.personalForm.isHelp,callback:function(t){e.$set(e.personalForm,"isHelp",t)},expression:"personalForm.isHelp"}},[r("el-radio",{staticStyle:{width:"100px"},attrs:{label:1}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.timeWage")}},[r("el-input",{staticStyle:{"margin-left":"18px"},attrs:{clearable:""},model:{value:e.personalForm.timeWage,callback:function(t){e.$set(e.personalForm,"timeWage",t)},expression:"personalForm.timeWage"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.numberWage")}},[r("el-input",{staticStyle:{"margin-left":"18px"},attrs:{clearable:""},model:{value:e.personalForm.numberWage,callback:function(t){e.$set(e.personalForm,"numberWage",t)},expression:"personalForm.numberWage"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:e.$t("ProcessFile.stat"),prop:"stat"}},[r("el-radio-group",{staticStyle:{width:"277px","margin-left":"19px"},model:{value:e.personalForm.stat,callback:function(t){e.$set(e.personalForm,"stat",t)},expression:"personalForm.stat"}},[r("el-radio",{staticStyle:{width:"120px"},attrs:{label:1}},[e._v("启用")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("停用")])],1)],1)],1)],1)],1)],1)]),e._v(" "),r("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[r("h2",{ref:"fuzhu",staticClass:"form-name"},[e._v("子件信息")]),e._v(" "),r("div",{staticClass:"buttons",staticStyle:{"margin-top":"58px"}},[r("el-button",{staticStyle:{background:"#3696fd","border-color":"#3696fd"},attrs:{type:"success"},on:{click:e.handleAddproduct}},[e._v("添加商品")]),e._v(" "),r("el-button",{attrs:{type:"danger"},on:{click:function(t){e.$refs.editable.removeSelecteds()}}},[e._v("删除")])],1),e._v(" "),r("my-detail",{attrs:{control:e.control},on:{"update:control":function(t){e.control=t},product:e.productdetail}}),e._v(" "),r("div",{staticClass:"container"},[r("el-editable",{ref:"editable",staticClass:"click-table1",staticStyle:{width:"100%"},attrs:{data:e.list2,"edit-config":{showIcon:!0,showStatus:!0},"edit-rules":e.validRules,stripe:"",border:"",size:"medium"},on:{"update:data":function(t){e.list2=t}}},[r("el-editable-column",{attrs:{type:"selection","min-width":"55",align:"center"}}),e._v(" "),r("el-editable-column",{attrs:{label:"序号","min-width":"55",align:"center",type:"index"}}),e._v(" "),r("el-editable-column",{attrs:{prop:"productCode",align:"center",label:"子件","min-width":"150px"}}),e._v(" "),r("el-editable-column",{attrs:{prop:"productName",align:"center",label:"子件名称","min-width":"150px"}}),e._v(" "),r("el-editable-column",{attrs:{prop:"typeIdname",align:"center",label:"规格","min-width":"150px"}}),e._v(" "),r("el-editable-column",{attrs:{prop:"color",align:"center",label:"颜色","min-width":"150px"}}),e._v(" "),r("el-editable-column",{attrs:{prop:"category",align:"center",label:"子件类型","min-width":"150px"}}),e._v(" "),r("el-editable-column",{attrs:{prop:"unit",align:"center",label:"单位","min-width":"150px"}}),e._v(" "),r("el-editable-column",{attrs:{"edit-render":{name:"ElInputNumber",attrs:{min:0},type:"visible"},prop:"quantity",align:"center",label:"定额","min-width":"150px"}}),e._v(" "),r("el-editable-column",{attrs:{"edit-render":{name:"ElInputNumber",attrs:{min:0},type:"visible"},prop:"lossRate",align:"center",label:"损耗率","min-width":"150px"}}),e._v(" "),r("el-editable-column",{attrs:{"edit-render":{name:"ElSelect",options:e.isKeyList,type:"visible"},prop:"isKey",align:"center",label:"是否关键件","min-width":"150px"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"buttons",staticStyle:{"margin-top":"20px"}},[r("el-button",{staticStyle:{background:"#3696fd","border-color":"#3696fd",width:"98px"},attrs:{type:"primary"},on:{click:function(t){e.handlesave()}}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{type:"danger"},on:{click:function(t){e.handlecancel()}}},[e._v("取消")])],1)],1)])},[],!1,null,"89bfab20",null);n.options.__file="AddStandardProcess.vue";t.default=n.exports},DhTb:function(e,t,r){"use strict";r.d(t,"c",function(){return l}),r.d(t,"f",function(){return o}),r.d(t,"h",function(){return s}),r.d(t,"d",function(){return i}),r.d(t,"b",function(){return n}),r.d(t,"e",function(){return d}),r.d(t,"g",function(){return c});var a=r("t3Un");function l(e){var t=new URLSearchParams;return""!==e&&null!==e&&void 0!==e&&t.append("Json",e),Object(a.a)({url:"/erp/workCenter/create",method:"post",data:t})}function o(e){var t=new URLSearchParams;return""!==e.id&&null!==e.id&&void 0!==e.id&&t.append("id",e.id),""!==e.code&&null!==e.code&&void 0!==e.code&&t.append("code",e.code),""!==e.workCenterName&&null!==e.workCenterName&&void 0!==e.workCenterName&&t.append("workCenterName",e.workCenterName),""!==e.isKey&&null!==e.isKey&&void 0!==e.isKey&&t.append("isKey",e.isKey),""!==e.deptId&&null!==e.deptId&&void 0!==e.deptId&&t.append("deptId",e.deptId),""!==e.stat&&null!==e.stat&&void 0!==e.stat&&t.append("stat",e.stat),t.append("pageNum",e.pageNum),t.append("pageSize",e.pageSize),Object(a.a)({url:"/erp/workCenter/search",method:"post",data:t})}function s(e){var t=new URLSearchParams;return""!==e&&null!==e&&void 0!==e&&t.append("Json",e),Object(a.a)({url:"/erp/workCenter/update",method:"post",data:t})}function i(e){var t=new URLSearchParams;return""!==e&&null!==e&&void 0!==e&&t.append("modelids",e),Object(a.a)({url:"/erp/workCenter/delete",method:"post",data:t})}function n(e){var t=new URLSearchParams;return""!==e&&null!==e&&void 0!==e&&t.append("Json",e),Object(a.a)({url:"/erp/processFile/create",method:"post",data:t})}function d(e){var t=new URLSearchParams;return""!==e.code&&null!==e.code&&void 0!==e.code&&t.append("code",e.code),""!==e.processName&&null!==e.processName&&void 0!==e.processName&&t.append("processName",e.processName),""!==e.shortName&&null!==e.shortName&&void 0!==e.shortName&&t.append("shortName",e.shortName),""!==e.description&&null!==e.description&&void 0!==e.description&&t.append("description",e.description),""!==e.stat&&null!==e.stat&&void 0!==e.stat&&t.append("stat",e.stat),""!==e.pageNum&&null!==e.pageNum&&void 0!==e.pageNum&&t.append("pageNum",e.pageNum),""!==e.pageSize&&null!==e.pageSize&&void 0!==e.pageSize&&t.append("pageSize",e.pageSize),Object(a.a)({url:"/erp/processFile/search",method:"post",data:t})}function c(e){var t=new URLSearchParams;return""!==e&&null!==e&&void 0!==e&&t.append("Json",e),Object(a.a)({url:"/erp/processFile/update",method:"post",data:t})}},eBS6:function(e,t,r){},"gDS+":function(e,t,r){e.exports={default:r("oh+g"),__esModule:!0}},"oh+g":function(e,t,r){var a=r("WEpk"),l=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return l.stringify.apply(l,arguments)}},xDkq:function(e,t,r){"use strict";var a=r("eBS6");r.n(a).a}}]);